<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mines Game</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }
    .tile {
      width: 60px;
      height: 60px;
      background: #222;
      border: 1px solid #444;
      cursor: pointer;
      font-size: 24px;
      line-height: 60px;
    }
    .tile.revealed.safe {
      background: #2ecc71;
    }
    .tile.revealed.mine {
      background: #e74c3c;
    }
    .controls {
      margin: 10px 0;
    }
  </style>
</head>
<body>

<h1>ðŸ’£ Mines Game</h1>
<div class="controls">
  Mines: <input type="number" id="mineCount" value="5" min="1" max="24" />
  <button onclick="startGame()">Start Game</button>
  <button onclick="cashOut()">Cash Out</button>
</div>
<div>
  <strong>Safe Clicks:</strong> <span id="safeCount">0</span><br>
  <strong>Multiplier:</strong> <span id="multiplier">1.00x</span>
</div>
<div class="grid" id="grid"></div>

<script>
const gridSize = 5;
let minePositions = [];
let revealedTiles = new Set();
let safeClicks = 0;
let gameOver = false;

function startGame() {
  const mineCount = parseInt(document.getElementById('mineCount').value);
  if (mineCount < 1 || mineCount >= gridSize * gridSize) {
    alert("Invalid mine count!");
    return;
  }

  minePositions = [];
  revealedTiles.clear();
  safeClicks = 0;
  gameOver = false;
  document.getElementById('safeCount').innerText = safeClicks;
  document.getElementById('multiplier').innerText = "1.00x";

  const totalTiles = gridSize * gridSize;
  const indices = [...Array(totalTiles).keys()];
  indices.sort(() => 0.5 - Math.random());
  minePositions = new Set(indices.slice(0, mineCount));

  const grid = document.getElementById('grid');
  grid.innerHTML = '';

  for (let i = 0; i < totalTiles; i++) {
    const tile = document.createElement('div');
    tile.className = 'tile';
    tile.dataset.index = i;
    tile.onclick = () => clickTile(tile, i);
    grid.appendChild(tile);
  }
}

function clickTile(tile, index) {
  if (gameOver || revealedTiles.has(index)) return;

  revealedTiles.add(index);

  if (minePositions.has(index)) {
    tile.classList.add('revealed', 'mine');
    tile.innerText = "ðŸ’£";
    gameOver = true;
    alert("ðŸ’¥ You hit a mine! Game Over.");
    revealAll();
  } else {
    tile.classList.add('revealed', 'safe');
    tile.innerText = "âœ”";
    safeClicks++;
    updateMultiplier();
    document.getElementById('safeCount').innerText = safeClicks;
  }
}

function updateMultiplier() {
  const base = 1.1;
  const multiplier = (base ** safeClicks).toFixed(2);
  document.getElementById('multiplier').innerText = multiplier + "x";
}

function cashOut() {
  if (gameOver || safeClicks === 0) return;
  const multiplier = document.getElementById('multiplier').innerText;
  alert(`ðŸ’° You cashed out at ${multiplier}`);
  revealAll();
  gameOver = true;
}

function revealAll() {
  const tiles = document.querySelectorAll('.tile');
  tiles.forEach(tile => {
    const index = parseInt(tile.dataset.index);
    if (minePositions.has(index)) {
      tile.classList.add('revealed', 'mine');
      tile.innerText = "ðŸ’£";
    } else if (!revealedTiles.has(index)) {
      tile.classList.add('revealed', 'safe');
      tile.innerText = "âœ”";
    }
  });
}
</script>

</body>
</html>
