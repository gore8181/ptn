<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mines Gambling Game</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      grid-gap: 10px;
      margin: 20px 0;
    }
    .tile {
      width: 60px;
      height: 60px;
      background: #222;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s;
    }
    .tile.safe {
      background: #1a7f1a;
      cursor: default;
    }
    .tile.mine {
      background: #a71d1d;
      cursor: default;
    }
    button, input, select {
      font-size: 16px;
      padding: 8px 12px;
      border-radius: 6px;
      border: none;
      margin: 5px;
    }
    button {
      cursor: pointer;
      background: #3a86ff;
      color: white;
      transition: background 0.3s;
    }
    button:hover:not(:disabled) {
      background: #255fcc;
    }
    input[type="number"] {
      width: 100px;
    }
    #status {
      margin-top: 10px;
      font-size: 18px;
      min-height: 24px;
    }
    #controls {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
  </style>
</head>
<body>
  <h1>Mines Gambling Game</h1>

  <div id="controls">
    <label>
      Bet Amount ($):
      <input type="number" id="bet" min="1" value="10" />
    </label>

    <label>
      Mines:
      <select id="minesCount">
        <option value="3">3 (Easy)</option>
        <option value="5" selected>5 (Medium)</option>
        <option value="7">7 (Hard)</option>
        <option value="10">10 (Extreme)</option>
      </select>
    </label>

    <button id="startBtn">Start Game</button>
    <button id="cashoutBtn" disabled>Cash Out</button>
  </div>

  <div id="game"></div>

  <div id="status"></div>

  <script>
    const gameContainer = document.getElementById('game');
    const startBtn = document.getElementById('startBtn');
    const cashoutBtn = document.getElementById('cashoutBtn');
    const betInput = document.getElementById('bet');
    const minesSelect = document.getElementById('minesCount');
    const status = document.getElementById('status');

    const gridSize = 25; // 5x5 grid
    let mines = [];
    let revealed = new Set();
    let bet = 0;
    let multiplier = 1;
    let gameActive = false;

    function startGame() {
      bet = parseFloat(betInput.value);
      if (isNaN(bet) || bet <= 0) {
        alert('Please enter a valid bet amount greater than 0.');
        return;
      }
      const minesCount = parseInt(minesSelect.value);
      multiplier = 1;
      revealed.clear();
      gameActive = true;
      status.textContent = `Game started! Bet: $${bet.toFixed(2)}. Click tiles to reveal safe spots.`;

      cashoutBtn.disabled = false;
      startBtn.disabled = true;
      betInput.disabled = true;
      minesSelect.disabled = true;

      // Generate mines
      mines = generateMines(minesCount);

      // Build grid
      gameContainer.innerHTML = '';
      for (let i = 0; i < gridSize; i++) {
        const tile = document.createElement('div');
        tile.classList.add('tile');
        tile.dataset.index = i;
        tile.addEventListener('click', () => onTileClick(i));
        gameContainer.appendChild(tile);
      }
    }

    function generateMines(count) {
      let minePositions = new Set();
      while (minePositions.size < count) {
        minePositions.add(Math.floor(Math.random() * gridSize));
      }
      return minePositions;
    }

    function onTileClick(index) {
      if (!gameActive) return;
      if (revealed.has(index)) return;

      const tile = gameContainer.children[index];

      if (mines.has(index)) {
        // Hit mine - lose
        tile.classList.add('mine');
        tile.textContent = '💣';
        endGame(false);
      } else {
        // Safe tile
        tile.classList.add('safe');
        tile.textContent = '✔️';
        revealed.add(index);
        // Increase multiplier for each safe tile (simple multiplier example)
        multiplier = 1 + revealed.size * 0.3;
        status.textContent = `Safe! Current multiplier: x${multiplier.toFixed(2)}. Click more or cash out.`;
      }
    }

    function endGame(won) {
      gameActive = false;
      cashoutBtn.disabled = true;
      startBtn.disabled = false;
      betInput.disabled = false;
      minesSelect.disabled = false;

      if (won) {
        const winnings = bet * multiplier;
        status.textContent = `You cashed out! You won $${winnings.toFixed(2)}.`;
      } else {
        // Reveal all mines
        mines.forEach((mineIdx) => {
          const mineTile = gameContainer.children[mineIdx];
          if (!mineTile.classList.contains('mine')) {
            mineTile.classList.add('mine');
            mineTile.textContent = '💣';
          }
        });
        status.textContent = `Boom! You hit a mine. You lost your bet of $${bet.toFixed(2)}. Try again!`;
      }
    }

    cashoutBtn.addEventListener('click', () => {
      if (!gameActive) return;
      endGame(true);
    });

    startBtn.addEventListener('click', startGame);
  </script>
</body>
</html>
